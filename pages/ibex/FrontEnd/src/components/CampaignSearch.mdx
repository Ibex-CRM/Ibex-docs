### Campaign Search

Campaign subfolder within the Components directory houses logic for Campaign Search within IBEX.

### Folder Structure
- **Activation Folder** - Contains logic specific to activations on the Campaign Search. Handles displaying activations for a selected campaign in a dropdown list.
    - **Container.jsx** - Houses a container div that checks whether the campaign has activations or not. In the case of no activations, the container renders "No activations recorded for this campaign" and hides **ActivationsHeaderRow** as well. If activations are present, renders **ActivationsValueRow**.
    - **Header.jsx** - A very simple component that simply renders a column header for activations.
    - **HeaderRow.jsx** - A simple component that checks what columns for activations have been selected in **ColumnsEditor.jsx** and renders the selected headers as a row of headers.
    - **Value.jsx** - Houses the logic for singular cell values for the different headers present. Crossreferences the header names in a switch statement and changes the output based on that. This is where we would do any sort of manipulation of data in order to make it visually viable (e.g. reformatting dates, finding platform images based on name etc).
    - **ValueRow.jsx** - A simple component that renders **Value.jsx** based on the selected Activation Headers. Matches selected headers to fields in a Typesense object and renders the values.

- **AnalysisConfirmationModal.jsx** - A bit of a relic component. Was originally built to display a confirmation modal of selected campaigns in order to perform analysis based on selected campaigns. As the analysis part was never figured out, this component is currently not in use, but may be useful in the future.
- **ColumnsEditor.jsx** - Houses logic for the right-side settings drawer. Used for selecting and re-ordering both Campaign and Activation Headers that you wish to see in Campaign Search. The state of both campaign and activation headers are saved to **LocalStorage** and read/modified based on input from the user. Upon clearing cache or losing data in LocalStorage, reverts back to default state and gets saved back into LocalStorage. Uses React Drag-and-Drop for re-ordering columns.
- **CustomPagination.jsx** - Houses logix for the pagination in Campaign Search. Also includes a function to make sure the page gets scrolled to the top when going to the next/previous page.
- **CustomRangeSlider.jsx** - Originally built to allow for a more intuitive and simple way of setting budgets in Campaign Search. Currently slightly broken as the input fields don't trigger a call to Typesense. Slider itself works fine, but will need some tweaks to get the entire thing working. Logic was difficult to figure out as the slider works on a per-pixel basis and considering our range of budgets, using this is not entirely viable for the future. Will quite possibly neeed a rework soon.
- **Dashboard.jsx** - Was built to co-exist with **AnalysisConfirmationModal** as that was supposed to redirect the user to the dashboard. It never got finished, but still exists as a component for future reference.
- **GoogleSheetDropdown.jsx** - Not actually relevant to Campaign Search. Should probably be moved to a different folder.
- **Headers.jsx** - Houses all of the headers and the Typesense DB Fields associated with those headers for both Campaigns and Activations. Any new columns that need to be added, need to be added to the arrays of objects within. The order of objects is also the default order of columns.
```
{
  header: 'Brand', ## Name of the column as displayed on Campaign Search
  sortable: true, ## Whether or not the column is sortable. Generally should correspond to Typesense schema, but can be disabled just here to disable sorting for that column even if enabled in Typesense.
  dbField: 'brand.name', ## Name of the Typesense field that needs to be displayed under this column for each result.
  selected: true ## Whether or not the user has selected this column to be displayed on Campaign Search. Any that are set to true here are default columns. Users have individual control over this via ColumnsEditor
}
(We do not sort Activation columns and therefore the "sortable" key-value pair is not necessary.)
```

- **index.jsx** - Entrypoint for Campaign Search. Also houses logic to parse LocalStorage for individual header settings and instantiates the client necessary for Typesense to return results from search. This brings the entire project together.
- **RangeSliderDropdown.jsx** - A dropdown-style wrapper for **CustomRangeSlider.jsx**. Handles the opening/closing of the dropdown and whether or not the dropdown should be disabled all together or not.
- **SearchDocs.jsx** - Handles rendering a list of documents associated with the Campaign (contracts, internal and external sheets, PCA's etc). Function handleClick also houses logic to figure out how the list should open based on the position of the row on the screen (otherwise half of the list is inaccessible).
- **SearchHeader.jsx** - Similiar to **Header.jsx** in **Activation Folder**. Handles rendering the header for Campaigns and houses logic for the sorting icon. Also has the ability to render a subheader if one is provided within the object in **Headers.jsx**.
- **SearchHeaderRow.jsx** - Similiar to **HeaderRow.jsx** in **Activation Folder**. Checks whether the headers have been selected by the user and renders them. Houses logic for "indeterminate state" of selecting campaigns that is currently disabled. This was made to work in conjunction with **Dashboard.jsx** and **AnalysisConfirmationModal.jsx**. Indeterminate state shows that campaigns are selected for analysis, but not all the campaigns on that specific page are selected. Possibly has some logic errors as this hasn't been looked at for months and was never fully finished.
- **SearchResultRows.jsx** - Was originally created as a wrapper around the values in order to have the ability to select the entire campaign for analysis. Currently just renders the ValueRow as the rest of analysis didn't make it into the final build. This is where ActivationHeaders get passed to the **SearchValueRow.jsx** to figure out what kind of headers are to be shown in the Activation overview.
- **SearchTemplate.jsx** - Originally meant to house different column templates for different uses. Project eventually got abandoned, but the component has been kept around in case we ever want to implement templates.
- **SearchValue.jsx** - Functions identically to **Value.jsx** in **Activation Folder**. Takes in the name of the column and manipulates data to be visually viable.
- **SearchValueRow.jsx** - Houses logic for displaying Activations for that specific Campaign, also handles showing errors that have occured during the import of the campaign.